---
layout: post
title: "Fix: Azure 1.3 SDK “The communication object, System.ServiceModel.Channels.ServiceChannel, cannot be used for communication because it is in the Faulted state.”"
date: 2010-12-03 22:05
author: robert.muehsig
comments: true
categories: [Fix]
tags: [Azure, MVC]
---
{% include JB/setup %}
<p><a href="{{BASE_PATH}}/assets/wp-images/image1129.png"><img style="border-bottom: 0px; border-left: 0px; margin: 0px 10px 0px 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" align="left" src="{{BASE_PATH}}/assets/wp-images/image_thumb311.png" width="182" height="115" /></a> </p>  <p>Nach dem Update auf das <a href="http://www.microsoft.com/downloads/en/details.aspx?FamilyID=7a1089b6-4050-4307-86c4-9dadaa5ed018">Azure 1.3 SDK</a> konnte ich lokal meine MVC App nicht mehr starten. In der 1.2 Version ging alles und wenn ich die MVC App ohne "Azure” starte, hat sie auch funktioniert... doch nun bekam ich einen nervigen Fehler. Problemlösung: Web.config muss schreibbar sein! Scheinbar ein Bug vom SDK. Sobald die web.config readonly ist, bekommt man den Fehler.</p> <!--more-->  <p><strong>Die Fehlermeldung in Groß:</strong></p>  <p><a href="{{BASE_PATH}}/assets/wp-images/image1130.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb312.png" width="323" height="203" /></a> </p>  <p>Ich war etwas erstaunt, da ich eigentlich nichts mit WCF in der Applikation mache. Es ist nur eine ganz normale MVC App. Der Fehler lag daran, dass meine web.config auf readonly war (Source Control!).</p>  <p><a href="http://social.msdn.microsoft.com/Forums/en-US/windowsazuretroubleshooting/thread/26165c71-f941-4d84-9ef3-649d7bab0066">Hier</a> habe ich die Antwort von Aaron Schnieder gefunden:</p>  <p><em>FIXED!!!!!!!!!!!!!!!!!!!!!!!!</em></p>  <p><em>This issue drove me crazy for the last day; Microsoft owes me a beer for this fix! :) So after much weeping and gnashing of teeth, I figured out what the fix is:</em></p>  <p><em><strong>Make sure your web role web.config is writable</strong> (i.e. not locked in read-only by source control or the read-only file bit.)</em></p>  <p><em>It looks like there is a bug in the Azure SDK 1.3 that is causing the web.config to be written to during the instantiation of the Azure dev fabric roles. If the web.config is read-only, Azure is blocked from editing the file (no actual edits take place that I can find) and the bizarro System.ServiceModel.CommunicationObjectFailedException message bubbles up.</em></p>  <p><em>Secondarily.... Make sure that any &lt;system.web&gt;&lt;httpModule&gt; declarations are moved to &lt;system.webServer&gt;&lt;modules&gt;. This was a minor issue causing a few hiccups (not the main problem), but I thought it was worth mentioning.</em></p>  <p><em>Hope that helps everyone.</em></p>  <p><em>Aaron</em></p>  <p>Jetzt geht es jedenfalls wieder lokal zu starten. Ich hoffe allerdings, dass dieser Bug in den nächsten Versionen behoben wird. Nur zum Starten ein File auschecken empfinde ich als ziemlichen Fail.</p>
<p>Update: Hintergrundinfos warum das so ist, sind <a href="http://blogs.msdn.com/b/windowsazure/archive/2010/12/02/new-full-iis-capabilities-differences-from-hosted-web-core.aspx">hier</a> zu erfahren. 
</p>
